# MIME type configuration for MediFlow
# Ensure proper MIME types for JavaScript modules

# JavaScript files
AddType application/javascript .js
AddType application/javascript .jsx
AddType application/javascript .ts
AddType application/javascript .tsx

# Module scripts with query parameters
<FilesMatch "\.(js|jsx|ts|tsx)(\?.*)?$">
    Header set Content-Type "application/javascript; charset=utf-8"
</FilesMatch>

# Enable CORS for development
Header always set Access-Control-Allow-Origin "*"
Header always set Access-Control-Allow-Methods "GET, POST, PUT, DELETE, OPTIONS"
Header always set Access-Control-Allow-Headers "Content-Type, Authorization"

# Handle preflight requests
RewriteEngine On
RewriteCond %{REQUEST_METHOD} OPTIONS
RewriteRule ^(.*)$ $1 [R=200,L]

# SPA fallback
RewriteEngine On
RewriteBase /
RewriteRule ^index\.html$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.html [L]
